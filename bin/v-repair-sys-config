#!/bin/bash
# info: Restore system configuration
# options: [SYSTEM]
#
# example: v-repair-sys-config
#
# This function repairs or restores the system configuration file.

mode=$1

# Includes
# shellcheck source=/etc/skynetcp/skynet.conf
source /etc/skynetcp/skynet.conf
# shellcheck source=/usr/local/skynet/func/main.sh
source $SKYNET/func/main.sh

#----------------------------------------------------------#
#                        Action                            #
#----------------------------------------------------------#

if [ "$mode" = "restore" ]; then
	syshealth_restore_system_config
fi

if [ "$mode" = "repair" ]; then
	# load config file
	source_conf "$SKYNET/conf/skynet.conf"
	syshealth_repair_system_config
fi

#----------------------------------------------------------#
#                        skynet                            #
#----------------------------------------------------------#

$BIN/v-log-action "system" "Info" "System" "Executed $mode operation on system configuration."
log_event "$OK" "$ARGUMENTS"
